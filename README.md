# 合成大西瓜 (Emoji 版) 🍉

這是一個基於 **Matter.js** 物理引擎的趣味合成遊戲。我們將經典的「合成大西瓜」遊戲進行了現代化改造，加入了真實的物理碰撞效果和可愛的 Emoji 視覺風格。

## ✨ 遊戲特色

*   **真實物理體驗**：使用 [Matter.js](https://brm.io/matter-js/) 引擎，水果會自然地滾動、堆疊和碰撞，帶來更豐富的遊戲變數。
*   **智慧形狀偵測**：採用 **PCA (主成分分析)** 演算法，自動掃描 Emoji 的像素分佈，計算出最貼合的橢圓碰撞箱與旋轉角度，讓鳳梨、西瓜等不規則水果的滾動更加真實。
*   **Emoji 視覺風格**：使用高解析度的 Emoji (🍇, 🍒, 🍊...) 作為遊戲元素，畫面乾淨可愛。
*   **流暢的合併機制**：優化了合併邏輯，即使水果靜止接觸也能順利合併。
*   **完整遊戲功能**：
    *   📊 **計分板**：即時記錄您的分數。
    *   👀 **預覽功能**：顯示下一個即將出現的水果。
    *   ☠️ **遊戲結束判定**：當水果堆疊超過警戒線時自動結束遊戲。
*   **響應式設計**：支援桌面電腦與行動裝置（手機/平板）遊玩。

## 🎮 如何遊玩

1.  **瞄準**：移動滑鼠（或在手機上滑動手指）來選擇水果的落下位置。
2.  **放下**：點擊左鍵（或點擊螢幕）讓水果受重力落下。
3.  **合成**：當兩個 **相同種類** 的水果接觸時，它們會合併成一個更大的新水果，並獲得分數。
    *   進化鏈：🍇 ➡ 🍒 ➡ 🍊 ➡ 🍋 ➡ 🥝 ➡ 🍅 ➡ 🍑 ➡ 🍍 ➡ 🥥 ➡ 🍉
4.  **目標**：盡可能合成出最大的「西瓜」並挑戰最高分！
5.  **失敗條件**：如果水果堆疊得太高，觸碰到上方的警戒線並停留一段時間，遊戲就會結束。

## 🚀 安裝與執行

本專案為純靜態網頁應用，無需安裝 Node.js 或後端伺服器。

1.  **下載專案**：複製或下載本專案的所有檔案。
2.  **啟動遊戲**：直接使用瀏覽器（Chrome, Edge, Firefox 等）打開 `index.html` 檔案即可開始遊玩。

> **注意**：遊戲依賴 CDN 載入 Matter.js 函式庫，請確保您的設備已連接網際網路。

## 🛠️ 技術棧

*   **HTML5 / CSS3**：建構遊戲介面與響應式佈局。
*   **JavaScript (ES6+)**：遊戲核心邏輯。
*   **Matter.js**：強大的 2D 物理引擎，處理碰撞、重力與運動。
*   **Canvas API**：用於像素級分析與除錯視覺化。

## ⚙️ 進階設定

您可以在 `game.js` 檔案開頭找到以下設定變數來調整遊戲體驗：

*   `SHAPE_MODE` (預設: `'ELLIPSE'`)：
    *   `'ELLIPSE'`：**推薦模式**。使用 PCA 演算法自動計算 Emoji 的最佳擬合橢圓與旋轉角度。
    *   `'CIRCLE'`：使用標準圓形，物理最穩定但視覺貼合度較低。
    *   `'POLYGON'`：使用多邊形精確描繪 Emoji 輪廓（實驗性功能）。
*   `SHOW_COLLISION_OUTLINES` (預設: `false`)：
    *   `true`：顯示紅色的碰撞外框，用於除錯或觀察物理形狀。
    *   `false`：隱藏碰撞外框，僅顯示 Emoji。
*   `TEST_MODE` (預設: `false`)：
    *   `true`：開啟測試模式，水果將依序生成，並在底部顯示 PCA 分析的除錯面板（包含像素掃描圖、重心與主軸）。
    *   `false`：正常遊戲模式。

---
*Created with ❤️ by Pondahai & Antigravity*
